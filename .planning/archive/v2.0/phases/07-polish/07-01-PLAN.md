---
phase: 07-polish
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - medtriad/components/quiz/TimerRing.tsx
  - medtriad/components/quiz/AnswerCard.tsx
autonomous: true

must_haves:
  truths:
    - "Timer ring pulses visibly when <= 3 seconds remain"
    - "Answer button visibly scales down on press before selection"
    - "Press feedback feels responsive and snappy"
  artifacts:
    - path: "medtriad/components/quiz/TimerRing.tsx"
      provides: "Pulse animation in danger zone"
      contains: "withRepeat"
    - path: "medtriad/components/quiz/AnswerCard.tsx"
      provides: "Enhanced press scale animation"
      contains: "0.95"
  key_links:
    - from: "TimerRing seconds prop"
      to: "pulseScale animation"
      via: "useEffect watching seconds <= 3"
      pattern: "seconds <= 3.*withRepeat"
    - from: "AnswerCard handlePressIn"
      to: "scale shared value"
      via: "withSpring(0.95)"
      pattern: "withSpring\\(0\\.95"
---

<objective>
Add visual urgency to timer and enhance button press feedback

Purpose: Create game-like tension as time runs out and satisfying tactile feel on answer selection
Output: TimerRing with pulse animation, AnswerCard with more visible press scale
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/07-polish/07-RESEARCH.md

@medtriad/components/quiz/TimerRing.tsx
@medtriad/components/quiz/AnswerCard.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add timer urgency pulse animation</name>
  <files>medtriad/components/quiz/TimerRing.tsx</files>
  <action>
    Enhance TimerRing to pulse when seconds <= 3:

    1. Import additional reanimated functions:
       - cancelAnimation, withSequence, withRepeat, Easing

    2. Add shared value for pulse scale:
       ```typescript
       const pulseScale = useSharedValue(1);
       ```

    3. Add useEffect that triggers pulse when seconds <= 3 and > 0:
       - Start repeating pulse: scale 1 -> 1.08 -> 1 (120ms each direction)
       - Use withRepeat(-1, false) for continuous pulse
       - When seconds > 3 or === 0: cancelAnimation and reset to 1
       - Return cleanup function that cancels animation

    4. Create animated style for pulse:
       ```typescript
       const pulseStyle = useAnimatedStyle(() => ({
         transform: [{ scale: pulseScale.value }],
       }));
       ```

    5. Wrap the entire container View with Animated.View and apply pulseStyle:
       - Change outer View to Animated.View
       - Add pulseStyle to style array

    Note: Animate the container, not the SVG directly (SVG stroke animation is complex).
    The pulse creates visual urgency through scale, complementing the red color change.
  </action>
  <verify>
    Run app, start quiz, wait for timer to reach 3 seconds.
    Visual check: Timer ring should pulse (grow/shrink) continuously when <= 3 seconds.
    Pulse should stop and reset when next question starts.
  </verify>
  <done>Timer ring visibly pulses when 3 seconds or less remain, creating urgency</done>
</task>

<task type="auto">
  <name>Task 2: Enhance button press scale feedback</name>
  <files>medtriad/components/quiz/AnswerCard.tsx</files>
  <action>
    Make the press animation more visible and satisfying:

    1. Update handlePressIn:
       - Change scale target from 0.98 to 0.95 (more visible)
       - Adjust spring config: damping: 12, stiffness: 300 (bouncier)
       ```typescript
       const handlePressIn = () => {
         if (!disabled && state === 'default') {
           scale.value = withSpring(0.95, { damping: 12, stiffness: 300 });
         }
       };
       ```

    2. Update handlePressOut:
       - Keep target at 1
       - Adjust spring config: damping: 10, stiffness: 300 (bouncy return)
       ```typescript
       const handlePressOut = () => {
         scale.value = withSpring(1, { damping: 10, stiffness: 300 });
       };
       ```

    The lower damping creates a slight overshoot on release for a more "juicy" feel.
    Scale of 0.95 (5% shrink) is visible without being excessive.
  </action>
  <verify>
    Run app, start quiz, press and hold an answer button.
    Visual check: Button should visibly shrink when pressed.
    Release: Button should bounce back to full size with slight overshoot.
    Compare to previous subtle 0.98 scale - should be noticeably more satisfying.
  </verify>
  <done>Answer buttons have visible, satisfying press animation with scale to 0.95</done>
</task>

</tasks>

<verification>
Run full quiz round:
1. Start quiz and observe timer when it reaches 3, 2, 1 seconds
2. Timer should pulse visibly at each of those counts
3. Press and hold answer buttons - visible scale down
4. Release buttons - bouncy return to normal size
5. Verify no performance issues (animations smooth at 60fps)
</verification>

<success_criteria>
- Timer ring pulses continuously when seconds <= 3
- Timer pulse stops cleanly when time resets (next question)
- Answer buttons scale to 0.95 on press (visible shrink)
- Button release has satisfying bounce back
- No animation conflicts with existing shake/color transitions
</success_criteria>

<output>
After completion, create `.planning/phases/07-polish/07-01-SUMMARY.md`
</output>
