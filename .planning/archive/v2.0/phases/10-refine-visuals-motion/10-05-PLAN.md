# Plan 10-05: Polish Results Screen Score Reveal

## Frontmatter

```yaml
phase: 10
plan: 05
wave: 3
depends_on: [10-01]
files_modified:
  - medtriad/app/quiz/results.tsx
autonomous: true
estimated_tasks: 3
requirements: [VISREF-04]
```

## Objective

The results screen is the payoff moment â€” users wait here to see their score. The score reveal should feel momentous: the number counts up, then settles with a satisfying "landing" animation. Stats should stagger in with more dramatic timing to build anticipation.

**Design Principle:** One well-orchestrated page load with staggered reveals creates more delight than scattered micro-interactions. The results screen is THE moment to shine.

## Context

Current state:
- Score uses CountUp library (1 second count)
- Elements stagger with FadeInUp at 50ms intervals
- No "settle" animation after count completes
- Stagger timing is uniform

Enhancement strategy:
1. Add scale "settle" animation after score count-up completes
2. Increase stagger intervals for more dramatic reveal
3. Add spring physics to entry animations
4. Consider slight scale on stats row for emphasis

## Tasks

<task id="1">
<title>Add score settle animation</title>
<intent>Make the score feel like it "lands" with weight after counting up</intent>
<instructions>
In results.tsx:

1. Import additional animation utilities and Easings:
```typescript
import Animated, {
  FadeInUp,
  useSharedValue,
  useAnimatedStyle,
  withSequence,
  withSpring,
  withDelay,
} from 'react-native-reanimated';
import { Colors, Typography, Spacing, Radius, Durations, Easings } from '@/constants/theme';
```

2. Add score scale animation:
```typescript
const scoreScale = useSharedValue(1);

// Trigger settle after count-up completes
useEffect(() => {
  // CountUp takes 1 second, add small buffer
  const timeout = setTimeout(() => {
    scoreScale.value = withSequence(
      withSpring(1.08, Easings.pop),    // Slight overshoot
      withSpring(1, Easings.gentle)     // Settle
    );
  }, 1100);
  return () => clearTimeout(timeout);
}, []);

const scoreAnimatedStyle = useAnimatedStyle(() => ({
  transform: [{ scale: scoreScale.value }],
}));
```

3. Wrap score section in Animated.View with the style:
```typescript
<Animated.View
  entering={FadeInUp.delay(Durations.staggerMedium * 2).duration(Durations.normal).springify()}
  style={[styles.scoreSection, scoreAnimatedStyle]}
>
  <Text style={[styles.score, { color: colors.primary }]}>
    <CountUp
      isCounting
      start={0}
      end={score}
      duration={1}
      thousandsSeparator=","
    />
  </Text>
  <Text style={[styles.scoreLabel, { color: colors.textMuted }]}>
    points
  </Text>
</Animated.View>
```
</instructions>
<verification>
- [ ] Score has subtle scale settle after count-up
- [ ] Settle uses spring physics (overshoot then land)
- [ ] Timing matches count-up completion
- [ ] Animation feels satisfying, not distracting
</verification>
</task>

<task id="2">
<title>Enhance stagger timing for dramatic reveal</title>
<intent>Build anticipation with more dramatic stagger intervals</intent>
<instructions>
Update all entry animation delays to use Durations.staggerMedium (80ms) instead of Durations.stagger (50ms) for more dramatic pacing:

```typescript
{/* Mascot */}
<Animated.View
  entering={FadeInUp.delay(0).duration(Durations.normal).springify()}
>
  <TriMascot mood={mascotMood} size="md" />
</Animated.View>

{/* Result Message */}
<Animated.Text
  entering={FadeInUp.delay(Durations.staggerMedium).duration(Durations.normal).springify()}
  style={[styles.message, { color: colors.text }]}
>
  {resultMessage}
</Animated.Text>

{/* Score Display */}
<Animated.View
  entering={FadeInUp.delay(Durations.staggerMedium * 2).duration(Durations.normal).springify()}
  style={[styles.scoreSection, scoreAnimatedStyle]}
>
  {/* ... score content ... */}
</Animated.View>

{/* New High Score Badge */}
{isNewHighScore && (
  <Animated.View
    entering={FadeInUp.delay(Durations.staggerMedium * 3).duration(Durations.normal).springify()}
  >
    <HighScoreBadge />
  </Animated.View>
)}

{/* Stats Row */}
<Animated.View
  entering={FadeInUp.delay(Durations.staggerMedium * 4).duration(Durations.normal).springify()}
  style={styles.statsRow}
>
  {/* ... stats content ... */}
</Animated.View>

{/* Mastery Progress */}
<Animated.View
  entering={FadeInUp.delay(Durations.staggerMedium * 5).duration(Durations.normal).springify()}
  style={[styles.masteryBadge, { backgroundColor: colors.primaryLight }]}
>
  {/* ... mastery content ... */}
</Animated.View>

{/* Buttons */}
<Animated.View
  entering={FadeInUp.delay(Durations.staggerMedium * 6).duration(Durations.normal).springify()}
  style={styles.buttons}
>
  {/* ... buttons ... */}
</Animated.View>
```

Note: Adjust multipliers if high score badge is not shown (elements after it may need different multipliers based on whether badge appears).
</instructions>
<verification>
- [ ] Elements reveal in sequence with noticeable gaps
- [ ] Timing builds anticipation (not too fast, not too slow)
- [ ] Uses Durations.staggerMedium for consistency
- [ ] Overall reveal takes ~500-600ms total
</verification>
</task>

<task id="3">
<title>Test results screen experience</title>
<intent>Verify results reveal feels momentous and satisfying</intent>
<instructions>
1. Complete a quiz (try to get a mix of results: low score, high score, perfect)
2. Watch the results screen reveal sequence
3. Verify:
   - Elements stagger in with dramatic timing
   - Score counts up then "lands" with settle animation
   - Confetti timing still works for perfect rounds
   - Overall experience feels like a reward moment
4. Test both high score and regular score scenarios
</instructions>
<verification>
- [ ] Stagger timing feels dramatic and intentional
- [ ] Score settle is noticeable and satisfying
- [ ] Confetti still triggers at right time for perfect rounds
- [ ] Results screen feels like the payoff moment
- [ ] No performance issues with combined animations
</verification>
</task>

## Verification Criteria

- [ ] Score has settle animation after count-up completes
- [ ] Entry animations use Durations.staggerMedium for dramatic pacing
- [ ] All animations use springify() for organic feel
- [ ] Confetti timing unchanged for perfect rounds
- [ ] Results reveal feels momentous and rewarding

## Must-Haves (Goal-Backward)

For VISREF-04 "Polished motion throughout" and success criteria "Results score counts up with easing" and "Score and points animate with staggered reveals":
- [ ] Score has settle animation after count
- [ ] Stagger timing is dramatic (not rushed)
- [ ] Overall reveal builds anticipation

## Rollback

If issues occur:
1. Remove score settle animation
2. Revert to original stagger timing (50ms)
3. Results screen remains functional
