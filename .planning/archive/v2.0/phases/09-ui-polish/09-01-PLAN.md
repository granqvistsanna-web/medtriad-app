---
phase: 09-ui-polish
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - medtriad/app/(tabs)/library.tsx
  - medtriad/components/library/CategorySection.tsx
autonomous: true

must_haves:
  truths:
    - "Library screen has Spacing.lg (24px) horizontal padding"
    - "Library screen has Spacing.md (12px) top padding"
    - "Category sections animate in with FadeInUp stagger"
  artifacts:
    - path: "medtriad/app/(tabs)/library.tsx"
      provides: "Library screen with Home-consistent layout"
      contains: "paddingHorizontal: Spacing.lg"
    - path: "medtriad/components/library/CategorySection.tsx"
      provides: "Animated category accordion"
      contains: "FadeInUp"
  key_links:
    - from: "medtriad/app/(tabs)/library.tsx"
      to: "medtriad/components/library/CategorySection.tsx"
      via: "Component rendering with index for stagger delay"
      pattern: "delay.*index"
---

<objective>
Polish Library screen to match Home screen's visual language.

Purpose: Ensure Library screen uses same spacing, typography, and animation patterns as Home (UIPOL-01)
Output: Library screen with consistent padding, top spacing, and entry animations
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/09-ui-polish/09-RESEARCH.md

@medtriad/app/(tabs)/library.tsx
@medtriad/app/(tabs)/index.tsx (reference - Home screen patterns)
@medtriad/components/library/CategorySection.tsx
@medtriad/components/home/StatsGrid.tsx (reference - section header pattern)
@medtriad/constants/theme.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Update Library screen layout to match Home</name>
  <files>medtriad/app/(tabs)/library.tsx</files>
  <action>
Update the Library screen layout to match Home screen patterns:

1. Change content padding:
   - `paddingHorizontal: Spacing.base` -> `paddingHorizontal: Spacing.lg` (24px)
   - Add `paddingTop: Spacing.md` (12px)
   - Keep `paddingBottom: Spacing.xxl`
   - Add `gap: Spacing.lg` between sections

2. Update title styling:
   - Remove `marginTop: Spacing.md` from title (container padding handles this)
   - Remove `marginBottom: Spacing.lg` (gap handles this)

3. Pass index to CategorySection for stagger animation:
   - Map with index: `CATEGORIES.map((category, index) => ...`
   - Pass `delay={index * Durations.stagger}` prop to CategorySection

4. Import Durations from theme if not already imported.
  </action>
  <verify>
Run the app, navigate to Library tab:
- Horizontal padding should be visibly wider (24px vs 16px)
- Title should have consistent top spacing
- Layout should match Home screen spacing
  </verify>
  <done>Library screen uses Spacing.lg horizontal padding, Spacing.md top padding, gap: Spacing.lg between sections</done>
</task>

<task type="auto">
  <name>Task 2: Add entry animations to CategorySection</name>
  <files>medtriad/components/library/CategorySection.tsx</files>
  <action>
Add FadeInUp entry animations to CategorySection:

1. Add delay prop to component interface:
   ```typescript
   interface CategorySectionProps {
     category: TriadCategory;
     triads: Triad[];
     delay?: number;
   }
   ```

2. Import FadeInUp from react-native-reanimated (already has Animated import)

3. Wrap the outer container View with Animated.View and add entry animation:
   ```typescript
   <Animated.View
     entering={FadeInUp.delay(delay ?? 0).duration(Durations.normal).springify()}
     style={styles.container}
   >
     {/* existing Pressable and content */}
   </Animated.View>
   ```

4. Update the outer View to use Animated.View

Note: Keep existing accordion animations - this adds entry animation on top.
  </action>
  <verify>
Run the app, navigate to Library tab:
- Each category section should animate in with a staggered FadeInUp
- First category appears immediately, subsequent ones stagger in
- Existing accordion expand/collapse still works
  </verify>
  <done>CategorySection components animate in with staggered FadeInUp on Library screen load</done>
</task>

</tasks>

<verification>
After completing both tasks:
1. Compare Library and Home screen horizontal padding - should look identical
2. Category sections animate in with visible stagger effect
3. All existing functionality preserved (accordion expand/collapse)
4. Run `npx expo start` - no TypeScript errors
</verification>

<success_criteria>
- Library screen uses Spacing.lg (24px) horizontal padding
- Library screen has Spacing.md (12px) top padding
- Categories animate in with FadeInUp stagger
- Accordion functionality unchanged
- UIPOL-01 requirement satisfied
</success_criteria>

<output>
After completion, create `.planning/phases/09-ui-polish/09-01-SUMMARY.md`
</output>
