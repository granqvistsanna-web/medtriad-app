---
phase: 01-data-foundation
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - medtriad/types/triad.ts
  - medtriad/types/question.ts
  - medtriad/types/index.ts
  - medtriad/data/triads.json
  - medtriad/utils/shuffle.ts
autonomous: true

must_haves:
  truths:
    - "Triads JSON file contains 30-50 medical triads"
    - "Each triad has id, condition, exactly 3 findings, and category"
    - "TypeScript types enforce data shape at compile time"
  artifacts:
    - path: "medtriad/data/triads.json"
      provides: "Static triad data for quiz questions"
      contains: "triads"
    - path: "medtriad/types/triad.ts"
      provides: "Triad and TriadCategory types"
      exports: ["Triad", "TriadCategory", "TriadsData"]
    - path: "medtriad/types/question.ts"
      provides: "Quiz question types"
      exports: ["QuizQuestion", "QuizOption"]
    - path: "medtriad/types/index.ts"
      provides: "Barrel export for types"
    - path: "medtriad/utils/shuffle.ts"
      provides: "Fisher-Yates shuffle utility"
      exports: ["shuffle"]
  key_links:
    - from: "medtriad/data/triads.json"
      to: "medtriad/types/triad.ts"
      via: "JSON structure matches Triad interface"
---

<objective>
Create the data foundation for the MedTriad quiz app: TypeScript type definitions, medical triads JSON content, and shuffle utility.

Purpose: Establish the core data layer that all quiz functionality will build upon. This is the foundation - without accurate types and real medical triad content, nothing else works.

Output: Type-safe triad data (30-50 triads across 8+ categories) and supporting infrastructure (types, utilities) ready for question generation.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-data-foundation/01-RESEARCH.md

# Existing codebase context
@medtriad/tsconfig.json
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create TypeScript type definitions</name>
  <files>
    medtriad/types/triad.ts
    medtriad/types/question.ts
    medtriad/types/index.ts
  </files>
  <action>
Create the types directory and three files:

**medtriad/types/triad.ts:**
- Define `TriadCategory` as union type with 8-10 medical categories: 'cardiology', 'neurology', 'endocrine', 'pulmonary', 'gastroenterology', 'infectious', 'hematology', 'rheumatology', 'renal', 'obstetrics'
- Define `Triad` interface with:
  - `id: string` (unique identifier like "becks-triad")
  - `condition: string` (medical condition name)
  - `findings: [string, string, string]` (tuple type for exactly 3 findings)
  - `category: TriadCategory`
- Define `TriadsData` interface for JSON structure: `{ triads: Triad[] }`
- Add JSDoc comments explaining each field

**medtriad/types/question.ts:**
- Import `Triad` from './triad'
- Define `QuizOption` interface with:
  - `id: string`
  - `condition: string`
  - `isCorrect: boolean`
- Define `QuizQuestion` interface with:
  - `id: string`
  - `triad: Triad` (the correct answer's triad)
  - `displayFindings: string` (formatted findings for display)
  - `options: QuizOption[]` (4 options including correct)
- Add JSDoc comments

**medtriad/types/index.ts:**
- Re-export all types from triad.ts and question.ts for cleaner imports
  </action>
  <verify>
Run `npx tsc --noEmit` from medtriad directory - should pass with no errors
  </verify>
  <done>
Types compile without errors; Triad enforces tuple of 3 findings; TriadCategory limits valid categories
  </done>
</task>

<task type="auto">
  <name>Task 2: Create triads JSON data file</name>
  <files>
    medtriad/data/triads.json
  </files>
  <action>
Create the data directory and triads.json with 35-45 real medical triads.

**Structure:**
```json
{
  "triads": [
    {
      "id": "becks-triad",
      "condition": "Cardiac Tamponade",
      "findings": ["Hypotension", "Muffled heart sounds", "Jugular venous distention"],
      "category": "cardiology"
    }
  ]
}
```

**Required categories with minimum counts:**
- cardiology: 5-6 triads (Beck's, Virchow's, etc.)
- neurology: 5-6 triads (Charcot's, Cushing's, etc.)
- endocrine: 4-5 triads (Whipple's, etc.)
- pulmonary: 4-5 triads
- gastroenterology: 4-5 triads (Charcot's cholangitis, etc.)
- infectious: 3-4 triads (Meningitis, AIDS-defining, etc.)
- hematology: 3-4 triads (HUS, TTP, etc.)
- rheumatology: 3-4 triads (Reiter's, etc.)

**Requirements:**
- Use established, documented medical triads
- Each finding should be concise (2-4 words typically)
- IDs should be kebab-case and descriptive
- Total: 35-45 triads
- At least 4 triads per category (for distractor selection to work)

**Common medical triads to include:**
- Beck's Triad (cardiac tamponade)
- Virchow's Triad (DVT)
- Cushing's Triad (increased ICP)
- Charcot's Triad (cholangitis)
- Whipple's Triad (insulinoma)
- Horner's Syndrome
- Triad of DKA
- Classic triad of HUS
- Felty's syndrome
- Reiter's syndrome (reactive arthritis)
- Samter's Triad (aspirin-exacerbated respiratory disease)
- And more...
  </action>
  <verify>
1. Count triads: `cat medtriad/data/triads.json | grep '"id"' | wc -l` should show 35-45
2. Validate JSON: `cat medtriad/data/triads.json | npx json-parse-cli 2>/dev/null && echo "Valid JSON"` OR just ensure file loads without error
3. Check each category has 4+ entries
  </verify>
  <done>
JSON file contains 35-45 triads; each triad has id, condition, 3 findings, category; each category has at least 4 triads for distractor selection
  </done>
</task>

<task type="auto">
  <name>Task 3: Create Fisher-Yates shuffle utility</name>
  <files>
    medtriad/utils/shuffle.ts
  </files>
  <action>
Create the utils directory and shuffle.ts:

**medtriad/utils/shuffle.ts:**
```typescript
/**
 * Fisher-Yates shuffle algorithm
 * Produces unbiased permutations in O(n) time
 * Returns a NEW shuffled array (does not mutate input)
 */
export function shuffle<T>(array: T[]): T[] {
  const result = [...array];
  for (let i = result.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [result[i], result[j]] = [result[j], result[i]];
  }
  return result;
}
```

**Key points:**
- Generic type `<T>` for type safety
- Spread into new array to avoid mutation
- Standard Fisher-Yates implementation
- JSDoc comment explaining purpose
- Single export for tree-shaking
  </action>
  <verify>
Run `npx tsc --noEmit` from medtriad directory - should pass with no errors
  </verify>
  <done>
shuffle.ts exports generic Fisher-Yates shuffle function that returns new array without mutating input
  </done>
</task>

</tasks>

<verification>
After all tasks complete:

1. **Type compilation:** `cd medtriad && npx tsc --noEmit` passes
2. **Triad count:** JSON contains 35-45 triads
3. **Category coverage:** Each category has at least 4 triads
4. **Data shape:** Each triad has all required fields (id, condition, findings[3], category)
5. **File structure:**
   ```
   medtriad/
     data/
       triads.json
     types/
       index.ts
       triad.ts
       question.ts
     utils/
       shuffle.ts
   ```
</verification>

<success_criteria>
- TypeScript compiles without errors
- triads.json contains 35-45 medical triads
- Each of 8+ categories has at least 4 triads
- Triad type enforces exactly 3 findings via tuple
- shuffle utility is generic and non-mutating
- All files use @/* path alias where applicable
</success_criteria>

<output>
After completion, create `.planning/phases/01-data-foundation/01-01-SUMMARY.md`
</output>
