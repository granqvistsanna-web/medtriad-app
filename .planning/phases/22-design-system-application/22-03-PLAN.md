---
phase: 22-design-system-application
plan: 03
type: execute
wave: 2
depends_on: ["22-01"]
files_modified:
  - medtriad/app/(tabs)/index.tsx
  - medtriad/components/home/HomeHeader.tsx
  - medtriad/components/home/HeroCard.tsx
  - medtriad/components/home/ActionButtons.tsx
  - medtriad/components/home/StatsGrid.tsx
  - medtriad/components/home/CategoryMastery.tsx
  - medtriad/components/home/MasteryBar.tsx
  - medtriad/components/home/ProgressRing.tsx
  - medtriad/app/(tabs)/library.tsx
  - medtriad/components/library/SearchBar.tsx
  - medtriad/components/library/FilterChips.tsx
  - medtriad/components/library/TriadCard.tsx
  - medtriad/app/(tabs)/progress.tsx
  - medtriad/components/progress/StatsCard.tsx
  - medtriad/components/progress/TierProgressBar.tsx
autonomous: true

must_haves:
  truths:
    - "Home screen uses Text primitive for all text"
    - "Home screen badges use Badge primitive"
    - "Library search icon is Solar Icon"
    - "Progress screen uses Card primitive where appropriate"
    - "Category colors in FilterChips are documented exception"
  artifacts:
    - path: "medtriad/app/(tabs)/index.tsx"
      provides: "Home screen with primitives"
      contains: "import { theme } from"
    - path: "medtriad/components/home/HomeHeader.tsx"
      provides: "Header with Badge primitives"
      contains: "import { Badge, Text } from '@/components/primitives'"
    - path: "medtriad/components/library/SearchBar.tsx"
      provides: "Search bar with Solar Icon"
      contains: "MagnifyingGlass"
    - path: "medtriad/components/progress/StatsCard.tsx"
      provides: "Stats card with primitives"
      contains: "import { Card, Text, Icon } from '@/components/primitives'"
  key_links:
    - from: "medtriad/components/home/HomeHeader.tsx"
      to: "@/components/primitives"
      via: "Badge import"
      pattern: "import.*Badge.*from.*primitives"
    - from: "medtriad/components/library/SearchBar.tsx"
      to: "@solar-icons/react-native"
      via: "MagnifyingGlass import"
      pattern: "import.*MagnifyingGlass"
---

<objective>
Migrate medium-complexity screens (Home, Library, Progress) to use design system primitives.

Purpose: Apply migration patterns to the main tab screens which have moderate complexity and multiple sub-components.

Output: Home, Library, and Progress screens fully using Text, Icon, Badge, Card, and Tag primitives with theme semantic tokens.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/22-design-system-application/22-RESEARCH.md
@medtriad/app/(tabs)/index.tsx
@medtriad/components/home/HomeHeader.tsx
@medtriad/app/(tabs)/library.tsx
@medtriad/app/(tabs)/progress.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Migrate Home screen and components</name>
  <files>
medtriad/app/(tabs)/index.tsx
medtriad/components/home/HomeHeader.tsx
medtriad/components/home/HeroCard.tsx
medtriad/components/home/ActionButtons.tsx
medtriad/components/home/StatsGrid.tsx
medtriad/components/home/CategoryMastery.tsx
medtriad/components/home/MasteryBar.tsx
medtriad/components/home/ProgressRing.tsx
  </files>
  <action>
**index.tsx (Home):**
1. Replace Colors.light with `import { theme } from '@/constants/theme'`
2. Use theme.colors.surface.primary for background
3. Use theme.colors.brand.primary for ActivityIndicator

**HomeHeader.tsx:**
1. Import primitives: `import { Badge, Text, Icon } from '@/components/primitives'`
2. Import Solar Icons: `import { Star, Fire } from '@solar-icons/react-native/bold'`
3. Replace custom badge Views with Badge primitive:
   ```tsx
   <Badge label={totalPoints.toLocaleString()} icon={Star} variant="gold" />
   <Badge label={`${dailyStreak} day streak`} icon={Fire} variant="streak" />
   ```
4. Replace Text with Text primitive using appropriate variants
5. Remove IconSymbol import
6. Replace Colors.light with theme semantic colors

**HeroCard.tsx:**
1. Import Text primitive
2. Replace all Text elements with Text primitive
3. Keep the custom shine animation button (special case - preserves unique animation)
4. Replace Colors.light with theme
5. Replace IconSymbol with Icon primitive for any icons
6. Import appropriate Solar Icons (Star, etc.)

**ActionButtons.tsx:**
1. Import primitives: `import { Text, Icon, Card } from '@/components/primitives'`
2. Import Solar Icons: `import { BookMinimalistic, Bolt } from '@solar-icons/react-native/bold'`
3. Replace custom button containers with Card primitive (interactive)
4. Replace Text with Text primitive
5. Replace IconSymbol with Icon primitive
6. Use theme colors

**StatsGrid.tsx (if exists):**
1. Apply same patterns - Text primitive, Icon primitive, theme colors

**CategoryMastery.tsx:**
1. Import Text primitive
2. Replace Text elements with Text primitive
3. Use theme colors for backgrounds and text

**MasteryBar.tsx:**
1. Replace Colors.light with theme.colors.brand for progress colors

**ProgressRing.tsx:**
1. Replace Colors.light.primary with theme.colors.brand.primary for SVG colors
  </action>
  <verify>
TypeScript compiles:
```
cd medtriad && npx tsc --noEmit
```
Run app and verify Home tab:
1. Header badges display with Solar Icons
2. Hero card renders correctly
3. Action buttons display with icons
4. Category mastery section renders
5. All text uses correct typography
6. No visual regressions
  </verify>
  <done>
Home screen uses theme semantic colors
HomeHeader uses Badge primitive with Solar Icons
HeroCard uses Text primitive
ActionButtons use Card and Icon primitives
No IconSymbol imports in Home components
  </done>
</task>

<task type="auto">
  <name>Task 2: Migrate Library screen and components</name>
  <files>
medtriad/app/(tabs)/library.tsx
medtriad/components/library/SearchBar.tsx
medtriad/components/library/FilterChips.tsx
medtriad/components/library/TriadCard.tsx
  </files>
  <action>
**library.tsx:**
1. Replace Colors.light with theme
2. Replace Text imports with Text primitive where applicable

**SearchBar.tsx:**
1. Import primitives: `import { Icon } from '@/components/primitives'`
2. Import Solar Icons: `import { MagnifyingGlass, CloseCircle } from '@solar-icons/react-native/bold'`
3. Replace IconSymbol('magnifyingglass') with `<Icon icon={MagnifyingGlass} size="md" />`
4. Replace IconSymbol('xmark') with `<Icon icon={CloseCircle} size="sm" />`
5. Replace Colors.light with theme colors
6. Keep TextInput from react-native (not a primitive)

**FilterChips.tsx:**
1. Import Text primitive
2. Replace Text with Text primitive
3. **KEEP category colors as documented exception** - these 10 unique color palettes serve UX purpose (visual differentiation) and are localized to this one component
4. Add comment at top of file:
   ```tsx
   // DESIGN SYSTEM EXCEPTION: Category colors are intentionally hardcoded
   // for visual differentiation. See 22-RESEARCH.md for rationale.
   ```
5. Replace any other Colors.light usage with theme where possible

**TriadCard.tsx:**
1. Import primitives: `import { Text, Card, Tag } from '@/components/primitives'`
2. Replace Text with Text primitive
3. Consider using Card primitive for the container
4. Replace any hardcoded yellow (#FEF08A) with theme.colors.warning.light
5. Use Tag primitive for category labels if applicable
6. Replace Colors.light with theme
  </action>
  <verify>
TypeScript compiles:
```
cd medtriad && npx tsc --noEmit
```
Run app and verify Library tab:
1. Search bar with magnifying glass icon works
2. Clear button (X) works
3. Filter chips display with category colors (documented exception)
4. Triad cards display correctly
5. Search and filter functionality works
  </verify>
  <done>
Library screen uses theme colors
SearchBar uses Icon primitive with Solar Icons
FilterChips has documented exception comment for category colors
TriadCard uses Text and Card primitives
No IconSymbol imports in Library components
  </done>
</task>

<task type="auto">
  <name>Task 3: Migrate Progress screen and components</name>
  <files>
medtriad/app/(tabs)/progress.tsx
medtriad/components/progress/StatsCard.tsx
medtriad/components/progress/TierProgressBar.tsx
  </files>
  <action>
**progress.tsx:**
1. Replace Colors.light with theme
2. Replace Text from react-native with Text primitive
3. Use theme.colors.surface.primary for background

**StatsCard.tsx:**
1. Import primitives: `import { Card, Text, Icon } from '@/components/primitives'`
2. Import Solar Icons for stat icons:
   - `Cup` for trophy (high score)
   - `PercentSquare` for accuracy
   - `Gamepad` for games played
3. Replace IconSymbol with Icon primitive
4. Replace Text with Text primitive
5. Replace container with Card primitive if appropriate
6. For the colored header themes (purple, teal, blue, amber), consider:
   - Option A: Keep hardcoded colors as localized exception (like FilterChips)
   - Option B: Use theme.colors.purple, theme.colors.blue, theme.colors.gold
   - **Prefer Option B** - theme already has these colors defined
7. Replace Colors.light with theme semantic colors

**TierProgressBar.tsx:**
1. Import Text primitive
2. Replace Text with Text primitive
3. Replace Colors.light with theme colors
4. Use theme.colors.brand.primary for progress bar fill
  </action>
  <verify>
TypeScript compiles:
```
cd medtriad && npx tsc --noEmit
```
Run app and verify Progress tab:
1. Stats cards display with correct icons (Cup, PercentSquare, Gamepad)
2. Stats values and labels render correctly
3. Tier progress bar displays correctly
4. Color theming looks consistent
5. No visual regressions
  </verify>
  <done>
Progress screen uses theme semantic colors
StatsCard uses Card, Text, Icon primitives with Solar Icons
TierProgressBar uses Text primitive
No IconSymbol imports in Progress components
Colored stat headers use theme color families (purple, blue, gold)
  </done>
</task>

</tasks>

<verification>
- [ ] TypeScript compiles: `cd medtriad && npx tsc --noEmit`
- [ ] Home tab renders correctly with all sub-components
- [ ] Library tab search and filter work with Solar Icons
- [ ] Progress tab displays stats with Solar Icons
- [ ] No IconSymbol imports in any migrated files
- [ ] Category colors in FilterChips documented as exception
- [ ] All other hardcoded colors replaced with theme tokens
</verification>

<success_criteria>
- Home screen uses Badge primitive for gamification badges
- Library SearchBar uses Icon primitive with MagnifyingGlass/CloseCircle
- Progress StatsCard uses Icon primitive with Cup/PercentSquare/Gamepad
- All Text elements use Text primitive with appropriate variants
- Category colors in FilterChips documented as exception
- All screens use theme semantic colors
- App functions correctly with no visual regressions
</success_criteria>

<output>
After completion, create `.planning/phases/22-design-system-application/22-03-SUMMARY.md`
</output>
