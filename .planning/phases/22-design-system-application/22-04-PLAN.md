---
phase: 22-design-system-application
plan: 04
type: execute
wave: 3
depends_on: ["22-02", "22-03"]
files_modified:
  - medtriad/app/quiz/index.tsx
  - medtriad/app/quiz/results.tsx
  - medtriad/components/quiz/FindingsCard.tsx
  - medtriad/components/quiz/AnswerCard.tsx
  - medtriad/components/quiz/TimerBar.tsx
  - medtriad/components/quiz/CancelButton.tsx
  - medtriad/components/quiz/HighScoreBadge.tsx
  - medtriad/components/quiz/ShareCard.tsx
  - medtriad/components/quiz/TierUpCelebration.tsx
autonomous: true

must_haves:
  truths:
    - "Quiz screen uses Text primitive for all text"
    - "Quiz icons are Solar Icons (streak badge uses Fire)"
    - "AnswerCard correct/incorrect states use theme.colors.success/danger.darker"
    - "Results screen uses primitives"
    - "No IconSymbol imports in quiz components"
  artifacts:
    - path: "medtriad/app/quiz/index.tsx"
      provides: "Quiz screen with primitives"
      contains: "import { Text, Icon } from '@/components/primitives'"
    - path: "medtriad/components/quiz/AnswerCard.tsx"
      provides: "Answer card with theme colors"
      contains: "theme.colors.success"
    - path: "medtriad/app/quiz/results.tsx"
      provides: "Results screen with primitives"
      contains: "import { Text, Button } from '@/components/primitives'"
  key_links:
    - from: "medtriad/app/quiz/index.tsx"
      to: "@solar-icons/react-native"
      via: "Fire icon import"
      pattern: "import.*Fire"
    - from: "medtriad/components/quiz/AnswerCard.tsx"
      to: "theme.colors.success.darker"
      via: "correct state styling"
      pattern: "success\\.darker"
---

<objective>
Migrate the complex Quiz screen and all quiz-related components to use design system primitives.

Purpose: Complete the screen migration by tackling the most complex screen (Quiz) which has stateful interactions, animations, and multiple visual states.

Output: Quiz screen and Results screen fully using Text, Icon, Badge, Card primitives with theme semantic tokens including new success/danger.darker tokens.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/22-design-system-application/22-RESEARCH.md
@medtriad/app/quiz/index.tsx
@medtriad/app/quiz/results.tsx
@medtriad/components/quiz/AnswerCard.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Migrate Quiz screen main view</name>
  <files>
medtriad/app/quiz/index.tsx
medtriad/components/quiz/CancelButton.tsx
medtriad/components/quiz/TimerBar.tsx
  </files>
  <action>
**quiz/index.tsx:**
1. Import primitives: `import { Text, Icon, Badge } from '@/components/primitives'`
2. Import Solar Icons: `import { Fire } from '@solar-icons/react-native/bold'`
3. Replace `import { IconSymbol } from '@/components/ui/icon-symbol'` - remove
4. Replace Colors.light with `import { theme } from '@/constants/theme'`
5. Replace all Text elements with Text primitive:
   - Progress text: `<Text variant="footnote" color="muted">{currentIndex + 1} of {QUESTION_COUNT}</Text>`
   - Streak badge text: `<Text variant="footnote" weight="bold" color="brand">{combo}x</Text>`
   - Score text: `<Text variant="label">{correctCountRef.current}/...</Text>`
6. Replace streak badge IconSymbol with Icon primitive:
   ```tsx
   <Icon icon={Fire} size="sm" color={theme.colors.brand.primary} />
   ```
7. Replace all color references:
   - colors.background -> theme.colors.surface.primary
   - colors.border -> theme.colors.border.default
   - colors.textMuted -> handled by Text color="muted"
   - colors.text -> handled by Text color="primary"
   - colors.primaryLight -> theme.colors.surface.brand
   - colors.primary -> theme.colors.brand.primary

**CancelButton.tsx:**
1. Import Icon primitive and Solar Icon
2. Import: `import { CloseCircle } from '@solar-icons/react-native/bold'`
3. Replace IconSymbol with Icon primitive
4. Replace Colors.light with theme

**TimerBar.tsx:**
1. Import Text primitive if any text
2. Replace Colors.light with theme
3. Use theme.colors.timer for timer state colors (already semantic)
4. Keep animation logic as-is
  </action>
  <verify>
TypeScript compiles:
```
cd medtriad && npx tsc --noEmit
```
Run app and start a quiz:
1. Progress indicator shows correctly
2. Cancel button (X) works
3. Timer bar animates correctly
4. Streak badge appears on combos with Fire icon
5. Score displays correctly
  </verify>
  <done>
Quiz main screen uses Text and Icon primitives
Streak badge uses Fire Solar Icon
Cancel button uses CloseCircle Solar Icon
Timer bar uses theme.colors.timer
No IconSymbol imports
  </done>
</task>

<task type="auto">
  <name>Task 2: Migrate Quiz answer and findings components</name>
  <files>
medtriad/components/quiz/FindingsCard.tsx
medtriad/components/quiz/AnswerCard.tsx
  </files>
  <action>
**FindingsCard.tsx:**
1. Import primitives: `import { Text, Card, Tag } from '@/components/primitives'`
2. Replace Text with Text primitive:
   - Findings: `<Text variant="body">{finding}</Text>`
   - Category label: Consider using Tag primitive for category
3. Replace container with Card primitive if appropriate
4. Replace Colors.light with theme

**AnswerCard.tsx:**
This is the key component that needs the new darker tokens:
1. Import primitives: `import { Text, Icon } from '@/components/primitives'`
2. Import Solar Icons: `import { AltArrowRight } from '@solar-icons/react-native/bold'`
3. Replace IconSymbol('chevron.right') with Icon primitive
4. Replace Text with Text primitive
5. Replace Colors.light with theme
6. **Critical:** Update correct/incorrect state colors to use new tokens:
   ```tsx
   // Correct state
   borderColor: theme.colors.success.main,
   borderBottomColor: theme.colors.success.darker, // NEW - uses the token from 22-01
   backgroundColor: theme.colors.success.light,

   // Incorrect state
   borderColor: theme.colors.danger.main,
   borderBottomColor: theme.colors.danger.darker, // NEW - uses the token from 22-01
   backgroundColor: theme.colors.danger.light,
   ```
7. Replace hardcoded values:
   - `#16A34A` -> theme.colors.success.darker
   - `#DC2626` -> theme.colors.danger.darker
8. Keep the animation logic as-is
  </action>
  <verify>
TypeScript compiles:
```
cd medtriad && npx tsc --noEmit
```
Run app and play a quiz:
1. Findings card displays findings correctly
2. Answer cards show default state
3. Correct answer turns green with 3D depth (success.darker bottom border)
4. Incorrect answer turns red with 3D depth (danger.darker bottom border)
5. Chevron icon displays on answers
6. Animations work (press, reveal)
  </verify>
  <done>
FindingsCard uses Text and Card primitives
AnswerCard uses theme.colors.success.darker and danger.darker
AnswerCard uses Icon primitive with AltArrowRight
No hardcoded color values (#16A34A, #DC2626) - uses theme tokens
  </done>
</task>

<task type="auto">
  <name>Task 3: Migrate Results screen and celebration components</name>
  <files>
medtriad/app/quiz/results.tsx
medtriad/components/quiz/HighScoreBadge.tsx
medtriad/components/quiz/ShareCard.tsx
medtriad/components/quiz/TierUpCelebration.tsx
  </files>
  <action>
**results.tsx:**
1. Import primitives: `import { Text, Button, Badge } from '@/components/primitives'`
2. Note: Results may already import primitives/Button - verify and update if needed
3. Replace all Text from react-native with Text primitive:
   - Score display: `<Text variant="display">{score}</Text>`
   - Labels: `<Text variant="label">`
   - Stats: `<Text variant="stat">`
4. Replace Colors.light with theme
5. Update Button to use primitives/Button with Solar Icons if icons are used
6. Replace any IconSymbol with Icon primitive

**HighScoreBadge.tsx:**
1. Import primitives: `import { Badge, Icon } from '@/components/primitives'`
2. Import Solar Icon: `import { Star } from '@solar-icons/react-native/bold'`
3. Replace custom badge View with Badge primitive variant="gold"
4. Replace hardcoded gold (#FACC15) with theme.colors.gold.main
5. Replace Colors.light with theme

**ShareCard.tsx:**
1. Import Text primitive
2. Replace Text with Text primitive
3. Replace hardcoded #FFFFFF with theme.colors.surface.primary
4. Replace Colors.light with theme

**TierUpCelebration.tsx:**
1. Import Text primitive
2. Replace Text with Text primitive
3. Confetti colors: Keep hardcoded as acceptable exception (celebration-specific colors)
4. Add comment: `// DESIGN SYSTEM EXCEPTION: Confetti colors are celebration-specific`
5. Replace other Colors.light usage with theme
  </action>
  <verify>
TypeScript compiles:
```
cd medtriad && npx tsc --noEmit
```
Complete a quiz and verify results screen:
1. Score displays in large display typography
2. High score badge shows with gold Star icon (if achieved)
3. Share card renders correctly
4. Tier up celebration shows (if tier up occurred)
5. Buttons work correctly
  </verify>
  <done>
Results screen uses Text, Button, Badge primitives
HighScoreBadge uses Badge primitive with Star Solar Icon
ShareCard uses Text primitive and theme colors
TierUpCelebration confetti colors documented as exception
No IconSymbol imports in quiz results components
  </done>
</task>

</tasks>

<verification>
- [ ] TypeScript compiles: `cd medtriad && npx tsc --noEmit`
- [ ] Quiz flow works end-to-end (start -> answer -> results)
- [ ] Streak badge shows Fire Solar Icon
- [ ] Cancel button shows CloseCircle Solar Icon
- [ ] Answer cards use success.darker and danger.darker for 3D depth
- [ ] Results screen displays correctly
- [ ] High score badge uses gold Star Solar Icon
- [ ] No IconSymbol imports in any quiz components
- [ ] No hardcoded color values except documented exceptions
</verification>

<success_criteria>
- Quiz screen fully uses Text, Icon, Badge primitives
- AnswerCard uses theme.colors.success.darker and danger.darker tokens
- Results screen uses all relevant primitives
- All quiz icons are Solar Icons (Fire, CloseCircle, AltArrowRight, Star)
- Quiz flow functions correctly with no visual regressions
- Only documented exceptions (confetti colors) remain hardcoded
</success_criteria>

<output>
After completion, create `.planning/phases/22-design-system-application/22-04-SUMMARY.md`
</output>
