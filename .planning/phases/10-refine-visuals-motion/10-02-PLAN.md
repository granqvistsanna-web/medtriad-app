# Plan 10-02: Enhance Button & Card Press States

## Frontmatter

```yaml
phase: 10
plan: 02
wave: 2
depends_on: [10-01]
files_modified:
  - medtriad/components/ui/Button.tsx
  - medtriad/components/quiz/AnswerCard.tsx
  - medtriad/components/quiz/CancelButton.tsx
autonomous: true
estimated_tasks: 4
requirements: [VISREF-03]
```

## Objective

Add tactile depth to interactive elements. Buttons should feel like physical objects that compress when pressed — not just scale, but also compress their "depth" (the bottom border that creates the 3D illusion). Cards should lift slightly with a subtle shadow increase.

**Design Principle:** Every tap should feel satisfying. Micro-interactions build trust and delight.

## Context

Current state:
- Button.tsx: Has scale animation (0.98), has static borderBottomWidth: 3
- AnswerCard.tsx: Has scale animation (0.95), no shadow change
- CancelButton.tsx: No press animation at all

Enhancement strategy:
1. Button: Animate borderBottomWidth on press (compress the depth)
2. AnswerCard: Add subtle shadow lift on correct answer "pop"
3. CancelButton: Add basic press state for consistency

## Tasks

<task id="1">
<title>Enhance Button press with depth compression</title>
<intent>Make button feel like it physically presses down by compressing its bottom border</intent>
<instructions>
In Button.tsx:

1. Import Easings from theme:
```typescript
import { Colors, Typography, Shadows, Radius, Spacing, Easings } from '@/constants/theme';
```

2. Add a shared value for the border bottom:
```typescript
const borderBottom = useSharedValue(3);
```

3. Update animatedStyle to include border:
```typescript
const animatedStyle = useAnimatedStyle(() => ({
  transform: [{ scale: scale.value }],
  borderBottomWidth: borderBottom.value,
}));
```

4. Update press handlers to use Easings and animate border:
```typescript
const handlePressIn = () => {
  if (!disabled) {
    scale.value = withSpring(0.98, Easings.press);
    borderBottom.value = withSpring(1, Easings.press); // Compress depth
  }
};

const handlePressOut = () => {
  scale.value = withSpring(1, Easings.press);
  borderBottom.value = withSpring(3, Easings.press); // Restore depth
};

const handleHoverIn = () => {
  if (!disabled) {
    scale.value = withSpring(1.02, Easings.press);
  }
};

const handleHoverOut = () => {
  scale.value = withSpring(1, Easings.press);
};
```

5. Remove the static borderBottomWidth from styles.button and let animated style control it.
</instructions>
<verification>
- [ ] Button compresses border on press (3 → 1)
- [ ] Button restores border on release (1 → 3)
- [ ] Uses Easings.press from theme
- [ ] No visual glitches during animation
</verification>
</task>

<task id="2">
<title>Add pop effect to correct AnswerCard</title>
<intent>Give satisfying feedback when user selects correct answer</intent>
<instructions>
In AnswerCard.tsx:

1. Import Easings and withSequence:
```typescript
import { Colors, Typography, Radius, Spacing, Durations, Easings } from '@/constants/theme';
```

2. Add effect for correct state pop:
```typescript
// Pop animation when correct
useEffect(() => {
  if (state === 'correct') {
    scale.value = withSequence(
      withSpring(1.05, Easings.pop),  // Quick overshoot
      withSpring(1, Easings.gentle)   // Settle back
    );
  }
}, [state]);
```

3. Update existing press handlers to use Easings:
```typescript
const handlePressIn = () => {
  if (!disabled && state === 'default') {
    scale.value = withSpring(0.95, Easings.press);
  }
};

const handlePressOut = () => {
  scale.value = withSpring(1, Easings.press);
};
```
</instructions>
<verification>
- [ ] Correct answer card pops (scales up then settles)
- [ ] Uses Easings.pop for overshoot, Easings.gentle for settle
- [ ] Press states still work correctly
- [ ] Shake animation on incorrect still works
</verification>
</task>

<task id="3">
<title>Add press state to CancelButton</title>
<intent>Ensure all interactive elements have tactile feedback</intent>
<instructions>
In CancelButton.tsx:

1. Wrap in Animated if not already, add press animation:
```typescript
import Animated, {
  useAnimatedStyle,
  useSharedValue,
  withSpring,
} from 'react-native-reanimated';
import { Easings } from '@/constants/theme';

const AnimatedPressable = Animated.createAnimatedComponent(Pressable);

// Inside component:
const scale = useSharedValue(1);

const animatedStyle = useAnimatedStyle(() => ({
  transform: [{ scale: scale.value }],
}));

const handlePressIn = () => {
  scale.value = withSpring(0.95, Easings.press);
};

const handlePressOut = () => {
  scale.value = withSpring(1, Easings.press);
};
```

2. Replace Pressable with AnimatedPressable, add handlers and animatedStyle.
</instructions>
<verification>
- [ ] CancelButton has scale animation on press
- [ ] Uses Easings.press from theme
- [ ] Button still functions correctly
</verification>
</task>

<task id="4">
<title>Test all press interactions</title>
<intent>Verify all press states feel cohesive</intent>
<instructions>
1. Start the app: `npx expo start`
2. Test Button press on home screen (Start Quiz button)
3. Test AnswerCard press in quiz
4. Test CancelButton in quiz
5. Verify correct answer gets the pop effect
6. Verify all animations feel cohesive and use the same motion language
</instructions>
<verification>
- [ ] Start Quiz button has depth compression
- [ ] Answer cards have satisfying press feel
- [ ] Cancel button responds to press
- [ ] Correct answer pop is noticeable but not jarring
- [ ] All motions feel part of the same design language
</verification>
</task>

## Verification Criteria

- [ ] Button borderBottomWidth animates on press (3 → 1 → 3)
- [ ] AnswerCard correct state triggers pop animation
- [ ] CancelButton has press scale animation
- [ ] All components use Easings from theme.ts
- [ ] No visual glitches or jank during animations

## Must-Haves (Goal-Backward)

For VISREF-03 "Micro-interactions added to buttons and cards":
- [ ] Buttons have tactile press feedback beyond simple scale
- [ ] Cards have enhanced feedback on correct selection
- [ ] All interactive elements respond to touch

## Rollback

If issues occur:
1. Revert Button.tsx to static borderBottomWidth
2. Remove pop effect from AnswerCard (keep existing animations)
3. CancelButton can remain without animation (lower priority)
