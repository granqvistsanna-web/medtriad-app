---
phase: 05-feedback-persistence
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - medtriad/app/quiz/index.tsx
autonomous: true

must_haves:
  truths:
    - "Light haptic fires when user taps an answer (any answer)"
    - "No haptic fires on timeout (silent visual feedback only)"
    - "Haptics feel consistent and understated regardless of correct/incorrect"
  artifacts:
    - path: "medtriad/app/quiz/index.tsx"
      provides: "Haptic feedback on answer selection"
      contains: "ImpactFeedbackStyle.Light"
  key_links:
    - from: "handleAnswerSelect"
      to: "Haptics.impactAsync"
      via: "function call on answer tap"
      pattern: "impactAsync.*Light"
---

<objective>
Refine haptic feedback to use consistent Light style per user decision

Purpose: Users receive subtle, non-punishing haptic feedback that feels helpful. Correct and incorrect answers feel the same - the visual feedback communicates the result, not the haptic.

Output: All answer taps use Light impact. No haptics on timeout.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/05-feedback-persistence/05-CONTEXT.md
@.planning/phases/05-feedback-persistence/05-RESEARCH.md
@medtriad/app/quiz/index.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Simplify haptic feedback to consistent Light style</name>
  <files>medtriad/app/quiz/index.tsx</files>
  <action>
    Update haptic feedback per user decision (consistent, understated, not punishing):

    1. In handleAnswerSelect function, keep only ONE haptic at the start:
       ```typescript
       const handleAnswerSelect = async (option: QuizOption) => {
         // Single Light haptic on tap - consistent for all answers
         Haptics.impactAsync(Haptics.ImpactFeedbackStyle.Light);

         dispatch({
           type: 'SELECT_ANSWER',
           optionId: option.id,
           isCorrect: option.isCorrect,
           timeRemaining: state.timeRemaining,
         });

         if (option.isCorrect) {
           correctCountRef.current += 1;
           const newComboTier = getComboTier(consecutiveCorrect + 1);
           if (newComboTier > maxComboRef.current) {
             maxComboRef.current = newComboTier;
           }
           setFeedbackText('Correct!');
           // REMOVE: Haptics.notificationAsync(Success) - was here
         } else {
           const correctOption = currentQuestion.options.find((o) => o.isCorrect);
           setFeedbackText(`Correct: ${correctOption?.condition}`);
           // REMOVE: Haptics.notificationAsync(Error) - was here
         }
       };
       ```

    2. In the timeout useEffect, REMOVE the haptic feedback:
       ```typescript
       useEffect(() => {
         if (status === 'playing' && timeRemaining === 0) {
           setFeedbackText("Time's up!");
           // REMOVE: Haptics.notificationAsync(Error) - no haptic on timeout
           dispatch({
             type: 'SELECT_ANSWER',
             optionId: '',
             isCorrect: false,
             timeRemaining: 0,
           });
         }
       }, [status, timeRemaining, dispatch]);
       ```

    3. Verify handleAnswerSelect still has the initial Light impact (it's already there, just ensure the Medium one is changed to Light)

    Current code has:
    - `Haptics.impactAsync(Medium)` at start of handleAnswerSelect
    - `Haptics.notificationAsync(Success)` after correct
    - `Haptics.notificationAsync(Error)` after incorrect
    - `Haptics.notificationAsync(Error)` on timeout

    Change to:
    - `Haptics.impactAsync(Light)` at start of handleAnswerSelect only
    - Remove all other haptics in handleAnswerSelect
    - Remove haptic in timeout effect

    The result: One Light haptic on tap, nothing else. Visual feedback (green/red) tells the story.
  </action>
  <verify>
    Run the app: `cd medtriad && npx expo start`
    Test on physical device (haptics don't work in simulator):
    - Tap any answer: Feel subtle Light haptic
    - Correct answer: Same Light haptic (no additional Success haptic)
    - Incorrect answer: Same Light haptic (no additional Error haptic)
    - Let timer expire: No haptic at all
  </verify>
  <done>All answer taps use Light impact, timeout has no haptic</done>
</task>

</tasks>

<verification>
- [ ] handleAnswerSelect uses `ImpactFeedbackStyle.Light` (not Medium)
- [ ] No `notificationAsync(Success)` calls remain
- [ ] No `notificationAsync(Error)` calls remain
- [ ] Timeout effect has no haptic call
- [ ] Physical device test confirms single Light haptic per answer
</verification>

<success_criteria>
1. Light haptic feedback fires on answer tap (regardless of correct/incorrect)
2. No additional haptic after result is shown
3. No haptic on timeout (silent, visual feedback only)
</success_criteria>

<output>
After completion, create `.planning/phases/05-feedback-persistence/05-02-SUMMARY.md`
</output>
